###
###
###

allow booting;
allow bootp;
ddns-update-style none;
option domain-name "pfsl.mech.tohoku.ac.jp";
option domain-search "pfsl.mech.tohoku.ac.jp";
option domain-name-servers 10.8.11.2;
default-lease-time 600;
max-lease-time 7200;
log-facility local7;
use-host-decl-names on;

subnet 10.90.0.0 netmask 255.255.0.0 {
  authoritative;

  option broadcast-address 10.90.255.255;
  option routers <%= @routers.map(&:banananet_ipaddress).join(", ") %>;

  group {
    filename "pxelinux.0";
    server-name "<%= node.banananet_ipaddress %>";
    <% @tftp_servers.each do |tftp_server| %>
    next-server <%= tftp_server.banananet_ipaddress %>;
    <% end %>

    host banana002 { hardware ethernet 78:2b:cb:4c:39:59; fixed-address 10.90.0.2; }
#    host banana003 { hardware ethernet 78:2b:cb:4c:97:5b; fixed-address 10.90.0.3; }

    # use /root/bin/dhcp-genconf.rb to generate host declarations.
  }
}
